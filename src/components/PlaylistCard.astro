---
import type { Playlist } from "../lib/data.ts";
import { CardPlayButton } from "./CardPlayButton";

interface Props {
	playlist: Playlist;
}

const { playlist } = Astro.props;
const { id, cover, title, artists, color } = playlist;

const artistsString = artists.join(", ");
---

<!-- class="playlist-item p-3 flex-col transition-all duration-300 group relative items-center pb-4 rounded-md
    	mb-6"
		 hover:bg-[#1A1A1A] -->
<article
	class="group relative hover:bg-[#1A1A1A] rounded-md transition-all duration-300 mb-2"
>
	<div
		class=`absolute right-4 bottom-20 translate-y-0
		   transition-all duration-500 opacity-0
		   group-hover:-translate-y-2 group-hover:opacity-100
		   z-10
		 `
	>
		<CardPlayButton id={id} client:visible />
	</div>

	<a
		href={`/playlist/${id}`}
		class="playlist-item transition-all duration-300 flex relative p-3 overflow-hidden gap-2 pb-4 rounded-md w-44 flex-col"
		transition:name=`playlist ${id} box`
	>
		<picture class="aspect-square w-full h-auto flex-none">
			<img
				src={cover}
				alt={`Cover of ${title} by ${artistsString}`}
				class="object-cover w-full h-full rounded-md"
				transition:name=`playlist ${id} image`
			/>
		</picture>
		<div class="pt-2">
			<div class="flex flex-auto flex-col truncate">
				<h4 class="truncate" transition:name=`playlist ${id} title`>
					{title}
				</h4>

				<span class="text-sm text-[#A4A4A4] truncate">
					{artistsString}
				</span>
			</div>
		</div>
	</a>
</article>
